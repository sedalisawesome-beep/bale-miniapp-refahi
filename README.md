# مینی اپ مراکز رفاهی و خدماتی - بله

یک مینی اپ اطلاعاتی برای نمایش مراکز رفاهی، درمانی و خدماتی طرف قرارداد در استان تهران.

## ✨ ویژگی‌ها

- 📱 **Responsive Design** - سازگار با تمام دستگاه‌ها
- 🎨 **تم دینامیک** - هماهنگ با تم تیره/روشن بله
- 🔍 **جستجوی پیشرفته** - جستجو در تمام مراکز
- 🗂️ **فیلتر دسته‌بندی** - فیلتر بر اساس نوع مرکز
- 🏙️ **فیلتر استان** - فیلتر بر اساس استان و شهر
- 📊 **آمار زنده** - نمایش تعداد مراکز و دسته‌بندی‌ها
- ⚡ **سریع و سبک** - بدون نیاز به دیتابیس
- 🔗 **لینک‌دهی هوشمند** - باز شدن لینک‌ها در مرورگر بله

## 📁 ساختار فایل‌ها

```
miniapbale/
├── index.html      # صفحه اصلی مینی اپ
├── style.css       # استایل‌ها و طراحی
├── app.js          # منطق اپلیکیشن و ارتباط با Bale SDK
└── README.md       # راهنمای استفاده
```

## 🚀 نحوه راه‌اندازی

### 1. آپلود فایل‌ها

فایل‌های `index.html`, `style.css` و `app.js` را روی یک سرور وب آپلود کنید. می‌توانید از:
- GitHub Pages (رایگان)
- Netlify (رایگان)
- Vercel (رایگان)
- یا هر سرور وب دیگری استفاده کنید

### 2. ثبت بازو در بله

1. به [@botfather](https://ble.ir/botfather) در بله مراجعه کنید
2. بازوی جدید ایجاد کنید یا بازوی موجود را انتخاب کنید

### 3. فعال‌سازی مینی اپ

در @botfather:

```
/newapp
# یا برای بازوهای موجود:
/myapps
```

سپس آدرس URL مینی اپ خود را وارد کنید (مثلاً: `https://yourdomain.com/miniapbale/index.html`)

### 4. تنظیم دکمه منو (اختیاری)

برای نمایش مینی اپ در دکمه منوی بازو:

```
/setmenubutton
```

### 5. تست مینی اپ

- به بازوی خود در بله مراجعه کنید
- روی دکمه منو کلیک کنید
- یا از لینک مستقیم استفاده کنید: `https://ble.ir/YOUR_BOT_USERNAME?startapp`

## 🛠️ سفارشی‌سازی

### افزودن استان جدید

در فایل `app.js`، به آبجکت `centersData` استان جدید اضافه کنید:

```javascript
const centersData = {
    tehran: { ... },
    isfahan: {
        restaurant: [
            { name: 'رستوران نمونه', url: 'https://ble.ir/...' }
        ]
    }
};
```

سپس در `index.html` گزینه جدید به select استان اضافه کنید:

```html
<select id="provinceFilter">
    <option value="all">همه استان‌ها</option>
    <option value="tehran">تهران</option>
    <option value="isfahan">اصفهان</option>
</select>
```

### افزودن دسته‌بندی جدید

1. در `app.js` به آبجکت `categories` دسته جدید اضافه کنید:

```javascript
const categories = {
    restaurant: { title: 'رستوران‌ها', icon: '🍽️' },
    newCategory: { title: 'عنوان دسته', icon: '🏪' }
};
```

2. در `index.html` گزینه جدید به select دسته‌بندی اضافه کنید

3. داده‌های دسته را در `centersData` اضافه کنید

### تغییر رنگ‌ها

مینی اپ به صورت خودکار از تم بله استفاده می‌کند. اگر می‌خواهید رنگ‌های پیش‌فرض را تغییر دهید، در فایل `style.css` مقادیر fallback را تغییر دهید:

```css
body {
    background-color: var(--bg-color, #ffffff);
    color: var(--text-color, #000000);
}
```

## 📱 ویژگی‌های Bale SDK استفاده شده

- ✅ `webapp.ready()` - اطلاع‌رسانی آماده بودن مینی اپ
- ✅ `webapp.expand()` - نمایش تمام صفحه
- ✅ `webapp.BackButton` - دکمه بازگشت
- ✅ `webapp.themeParams` - دریافت تم کاربر
- ✅ `webapp.setHeaderColor()` - تنظیم رنگ هدر
- ✅ `webapp.openLink()` - باز کردن لینک‌ها
- ✅ `webapp.enableClosingConfirmation()` - تایید بستن

## 🎨 دسته‌بندی‌های موجود

- 🍽️ رستوران‌ها (10 مورد)
- 👔 پوشاک (3 مورد)
- 🏥 مراکز درمانی (8 مورد)
- 🏪 رفاهی و خدماتی (6 مورد)
- 👓 عینک فروشی‌ها (3 مورد)
- 🏊 استخرها (9 مورد)

**جمع کل: 39 مرکز**

## 📝 یادداشت‌های مهم

1. **HTTPS الزامی است** - بله تنها از URLهای HTTPS پشتیبانی می‌کند
2. **بدون X-Frame-Options** - مطمئن شوید سرور شما هدر `X-Frame-Options` ارسال نمی‌کند
3. **CSP Headers** - اگر از Content Security Policy استفاده می‌کنید، `frame-src https://*.bale.ai` را اضافه کنید

## 🔧 عیب‌یابی

### مینی اپ در وب بله باز نمی‌شود

بررسی کنید که:
- سرور شما HTTPS دارد
- هدر `X-Frame-Options` ارسال نمی‌شود
- CSP به درستی تنظیم شده است

### تم بله اعمال نمی‌شود

- کنسول مرورگر را بررسی کنید
- مطمئن شوید SDK بله بارگذاری شده است
- از نسخه جدید بله استفاده کنید

### لینک‌ها باز نمی‌شوند

- از `webapp.openLink()` استفاده کنید
- مطمئن شوید URLها صحیح هستند

## 📞 پشتیبانی

برای سوالات بیشتر به مستندات رسمی بله مراجعه کنید:
- [مستندات مینی اپ بله](https://docs.bale.ai/)

## 📄 لایسنس

این پروژه آزاد و قابل استفاده برای همه است.

---

**#شادابی_و_سلامت_در_سایه_رفاه** 🌟
